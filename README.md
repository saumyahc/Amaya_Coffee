# Amaya Coffee

A Flutter app for browsing a premium coffee collection, authenticating with Firebase, and managing a simple cart.

## Features
- Splash screen with animations
- Email/password authentication (Firebase Auth)
- Firestore-backed coffee list (collection: `coffees`)
- Add to Cart with badge indicator (Provider state management)
- Cart page with quantity controls and checkout stub

## Tech stack
- Flutter (Dart 3)
- Firebase: Auth, Firestore
- Provider for app state
- cached_network_image for images

## Project structure (high level)
```
lib/
	main.dart                # App entry, Firebase init, routing, Provider
	splash_screen.dart       # Animated Splash
	login_page.dart          # Email/password login
	registration_page.dart   # Email/password registration
	home_page.dart           # Coffee list from Firestore
	cart_page.dart           # Cart UI
	models/
		cart.dart              # Cart model (Provider)
	firebase_options.dart    # Generated by FlutterFire CLI
```

## Prerequisites
- Flutter SDK installed and on PATH
- Dart SDK (included with Flutter)
- Firebase project

## Setup
1) Install packages
```powershell
flutter pub get
```

2) Firebase configuration
- Ensure `lib/firebase_options.dart` exists (generated by FlutterFire CLI).
- Android: place `android/app/google-services.json`.
- iOS: place `ios/Runner/GoogleService-Info.plist`.

3) Firestore data
- Create a `coffees` collection with documents like:
	- `id` (number)
	- `name` (string)
	- `description` (string)
	- `image` (string URL)
	- `ingredients` (array of strings)

## Run
```powershell
flutter run
```
Select your device (Android, iOS, web, desktop).

## Authentication persistence
- The app routes to Home if a user is already signed in (checked after splash).
- Web builds use `Persistence.LOCAL` to keep users signed in across reloads.

## Google Sign-In (optional)
1) Enable Google provider in Firebase Console > Authentication > Sign-in method.
2) Android: add your release SHA-1 in Firebase project settings.
3) iOS: set the REVERSED_CLIENT_ID in URL Types.
4) Add the Flutter package `google_sign_in` and wire it with `firebase_auth`.

## Android release SHA-1
If you need a release keystore and SHA-1:
- Create keystore (choose your alias and remember passwords):
```powershell
"C:\\Program Files\\Java\\jdk-<version>\\bin\\keytool.exe" -genkey -v -keystore android\app\key.jks -keyalg RSA -keysize 2048 -validity 10000 -alias <your_alias>
```
- Get SHA-1:
```powershell
"C:\\Program Files\\Java\\jdk-<version>\\bin\\keytool.exe" -list -v -keystore android\app\key.jks -alias <your_alias>
```

## Cart
- Add items from Home.
- Tap the cart icon to review items, adjust quantities, or remove them.
- Checkout button is a stub for future integration.

## Troubleshooting
- AnimationController disposed: guard with `if (!mounted) return;` before calling `forward()` after delays (see `splash_screen.dart`).
- keytool not found: use the full JDK path as shown above.
- Always landing on Login: ensure youâ€™re not signing out on startup; Firebase is initialized before `runApp` and auth state is observed.

## License
Private project (no license specified).
